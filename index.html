<!--Starting the html document-->
<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Basic documentation -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Basic CSS formatting for navbar-->
    <link rel="stylesheet" href="./static/base.css">
    <link rel="icon" type="image/png" href="./static/images/logo.png">
    
    <!--Creating the basic titles and css.-->
    <title>Quadratic Regressor</title>
    <link rel="stylesheet" type="text/css" href="./static/main.css">
    <script src='./scripts/validate_form.js'></script>
    <script src="https://www.desmos.com/api/v1.8/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
    <!--Adding JS library to allow for latex display-->
    <script
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
      type="text/javascript">
    </script>
</head>

<body>
    <!--Creating the navbar for inheritance-->
    <nav class="navbar">
        <ul class="navbar-list">
            <li>
                <div id="navbar-logo-div">
                    <a href="/">
                        <img id="navbar-logo" src="./static/images/logo.png">
                    </a>
                </div>
            </li>
            <li>
                <div>
                    <a href="http://impure-king.github.io">Home Page</a>
                </div>
            </li>
            <li>
                <div>
                    <a href="./">Quadratic Regressor</a>
                </div>
            </li>
        </ul>
    </nav>

    <!--All content is saved in this body tag-->
    <div class="body">
        <!-- Actual Program -->
        <h1 id="title">Quadratic Regressor</h1>
        <p>This is a quadratic regressor that can output the equation of a vertical parabola with two methods.</p>
        <p>Method 1: Enter <b>numerical vertex + point</b> of the vertical parabola.</p>
        <p>Method 2: Enter <b>3 numerical points</b> of the vertical parabola.</p>
        <p>All the coordinates will be treated as rectangular coordinates.</p>
        <p><b>Note: Horizontal Parabolas are not supported in the scope of this project.</b></p>
        <p><b>Also, some coordinates may produce estimates for the equation.</b></p>
        <hr>
        
        <!-- Creating the form -->
        <div class="quadratic_solver_1">
            <select name="methods" id="methods" onchange="changeForm()">
                <option value="1">Vertex Mode</option>
                <option value="2">Point Mode</option>
            </select>
            <script>
                let method_name = document.getElementById("methods");
                method_name.value = 1;
            </script>
            <form id="solver_1" name="solver_1" onsubmit="return validateNonEmpty1()">
                <label>Enter the vertex: </label>
                <label>(<input class="input" name="vertexx", step="0.001" type="number">, <input class="input" name="vertexy" step="0.001" type="number">)</label><br><br>

                <label>Enter another valid point: </label>
                <label>(<input class="input" name="pointx" step="0.001" type="number">, <input class="input" name="pointy" step="0.001" type="number">)</label><br><br>
                <input type="submit" value="Submit">
            </form>

            <form id="solver_2" name="solver_2" onsubmit="return validateNonEmpty2()">
                <label>Enter the first point: </label>
                <label>(<input class="input" name="x1", step="0.001" type="number">, <input class="input" name="y1" step="0.001" type="number">)</label><br><br>

                <label>Enter the second point: </label>
                <label>(<input class="input" name="x2" step="0.001" type="number">, <input class="input" name="y2" step="0.001" type="number">)</label><br><br>
                
                <label>Enter the third point: </label>
                <label>(<input class="input" name="x3", step="0.001" type="number">, <input class="input" name="y3" step="0.001" type="number">)</label><br><br>

                <input type="submit" value="Submit">
            </form>
        </div>
        
        <hr>

        <!-- Answer displayer -->
        <div id="answerBox">
            <h3>General Equation</h3>
            <p id="answer">Answer</p>
            <hr>
        </div>
        <!-- Adding Desmos Calculator -->
        <div id="calculatorBox">
            <div id="calculator">
                
            </div>
            <script>
                var elt = document.getElementById("calculator");
                var calculator = Desmos.GraphingCalculator(elt, graphpaper=false);
                var id=1;
            </script>
        </div>
    </div>

    <!-- IGNORE: LaTeX Guide -->
    <div id="latex-container">
        <hr>
        <h3>Algorithm Explaination</h3>
        <div id="explaination1">
            <h4>Method 1</h4>
            <p>When computing the vertex equation, we can use the vertex (x, y) as (h, k) for the equation below:</p>
            <p>$$y = a(x - h)^2 + k$$</p>
            <p>Now to find a, we can isolate algebraicly:</p>
            <p>$$y = a(x - h)^2 + k$$</p>
            <p>$$\implies y - k = a(x - h)^2$$</p>
            <p>$$\implies (y - k)/(x - h)^2 = a $$</p>
            <p>Thus we get: $$ a = \frac{(y - k)}{(x - h)^2} $$</p>
            <p>By plugging in the second point, we can get the leading coefficient.</p>
        </div>
        <div id="explaination2">
            <h4>Method 2</h4>
            <p>The three points can be represented as: $$(x_1, y_1);(x_2, y_2);(x_3, y_3)$$</p>
            <p>By plugging each point in the general equation we get:</p>
            <p>$$ax_1^2 + bx_1 + c = y_1$$</p>

            <p>$$ax_2^2 + bx_2 + c = y_2$$</p>

            <p>$$ax_3^2 + bx_3 + c = y_3$$</p>
            <p>where we want to solve for coefficients. Subtract equation (i) with (iii) and equation (ii) with (iii):</p>
            <p>$$a(x_1^2 - x_3^2) + b(x_1 - x_3) = y_1 - y_3$$</p>
            <p>$$a(x_2^2 - x_3^2) + b(x_2 - x_3) = y_2 - y_3$$</p>
            <p>Now aiming to eliminate b:</p>
            <p>$$a(x_1^2 - x_3^2)(x_2 - x_3) + b(x_1 - x_3)(x_2 - x_3) - a(x_2^2 - x_3^2)(x_1 - x_3) - b(x_2 - x_3)(x_1 - x_3) = (y_1 - y_3)(x_2 - x_3) - (y_2 - y_3)(x_1 - x_3)$$</p>
            <p>$$\implies a(x_1^2 - x_3^2)(x_2 - x_3) - a(x_2^2 - x_3^2)(x_1 - x_3) = (y_1 - y_3)(x_2 - x_3) - (y_2 - y_3)(x_1 - x_3)$$</p>
            <p> Now applying the difference of squares and factoring:</p>
            <p>$$a(x_1 - x_3)(x_1 + x_3)(x_2 - x_3) - a(x_2 - x_3)(x_2 + x_3)(x_1 - x_3) = (y_1 - y_3)(x_2 - x_3) - (y_2 - y_3)(x_1 - x_3)$$</p>
            <p>$$\implies a(x_1 - x_3)(x_2 - x_3)[(x_1 + x_3) - (x_2 + x_3)] = (y_1 - y_3)(x_2 - x_3) - (y_2 - y_3)(x_1 - x_3)$$</p>
            <p>$$\implies a(x_1 - x_3)(x_2 - x_3)(x_1 - x_2) = (y_1 - y_3)(x_2 - x_3) - (y_2 - y_3)(x_1 - x_3)$$</p>
            <p>Thus, $$a = \frac{(y_1 - y_3)(x_2 - x_3) - (y_2 - y_3)(x_1 - x_3)}{(x_1 - x_3)(x_2 - x_3)(x_1 - x_2)}$$</p>
            <p>By applying domain, the restrictions are that none of the abscissas are equal, which is valid consider we are solving <b>quadration functions</b>.</p>
            <p>Now using the value of a, we can solve for b:</p>
            <p>$$a(x_1^2 - x_3^2) + b(x_1 - x_3) = y_1 - y_3 \lor a(x_2^2 - x_3^2) + b(x_2 - x_3) = y_2 - y_3$$</p>
            <p>$$\implies b = \frac{(y_1 - y_3) - a(x_1^2 - x_3^2)}{(x_1 - x_3)} \lor b = \frac{(y_2 - y_3) - a(x_2^2 - x_3^2)}{(x_2 - x_3)}$$</p>
            <p>Either ways should yield the correct value of b. Now to solve c:</p>
            <p>$$ax_1^2 + bx_1 + c = y_1 \lor ax_2^2 + bx_2 + c = y_2 \lor ax_3^2 + bx_3 + c = y_3$$</p>
            <p>$$c = y_1 - (x_1^2 + bx_1) \lor c = y_2 - (ax_2^2 + bx_2) \lor c = y_3 - (ax_3^2 + bx_3)$$</p>
            <p>Thus, with minimal restrictions we can now solve for the quadratic equation.</p>
        </div>
    </div>
</body>
</html>
